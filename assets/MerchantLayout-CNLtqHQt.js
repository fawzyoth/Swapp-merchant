import{b as p,u as x,r as i,j as e,L as g,s as c}from"./index-ByG6RqwF.js";import{c as a,S as f}from"./store-BWwWvJXL.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b=a("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k=a("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j=a("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v=a("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w=a("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M=a("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N=a("Printer",[["polyline",{points:"6 9 6 2 18 2 18 9",key:"1306q4"}],["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["rect",{width:"12",height:"8",x:"6",y:"14",key:"5ipwut"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C=a("TestTube",[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5h0c-1.4 0-2.5-1.1-2.5-2.5V2",key:"187lwq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S=a("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=a("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),L=[{path:"/merchant/dashboard",icon:b,label:"Dashboard"},{path:"/merchant/exchanges",icon:w,label:"Échanges"},{path:"/merchant/clients",icon:S,label:"Clients"},{path:"/merchant/print-bordereau",icon:N,label:"Imprimer Bordereaux"},{path:"/merchant/branding",icon:M,label:"Ma Marque"},{path:"/merchant/chat",icon:v,label:"Messagerie"},{path:"/merchant/simulation",icon:C,label:"Simulation"}];function q(){const o=p(),n=x(),[r,l]=i.useState(!1),h=async()=>{await c.auth.signOut(),n("/merchant/login")};return e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>l(!r),className:"lg:hidden fixed top-4 left-4 z-50 p-2 bg-white rounded-lg shadow-lg",children:r?e.jsx(z,{className:"w-6 h-6"}):e.jsx(j,{className:"w-6 h-6"})}),e.jsx("aside",{className:`fixed left-0 top-0 h-full bg-white border-r border-slate-200 z-40 transition-transform duration-300 ${r?"translate-x-0":"-translate-x-full"} lg:translate-x-0 w-64`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsx("div",{className:"p-6 border-b border-slate-200",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-sky-100 rounded-lg flex items-center justify-center",children:e.jsx(f,{className:"w-6 h-6 text-sky-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-semibold text-slate-900",children:"E-Commerçant"}),e.jsx("p",{className:"text-xs text-slate-500",children:"Espace Pro"})]})]})}),e.jsx("nav",{className:"flex-1 p-4",children:e.jsx("ul",{className:"space-y-2",children:L.map(s=>{const d=s.icon,t=o.pathname===s.path;return e.jsx("li",{children:e.jsxs(g,{to:s.path,onClick:()=>l(!1),className:`flex items-center space-x-3 px-4 py-3 rounded-lg transition-colors ${t?"bg-sky-50 text-sky-600":"text-slate-600 hover:bg-slate-50"}`,children:[e.jsx(d,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:s.label})]})},s.path)})})}),e.jsx("div",{className:"p-4 border-t border-slate-200",children:e.jsxs("button",{onClick:h,className:"flex items-center space-x-3 px-4 py-3 rounded-lg text-slate-600 hover:bg-red-50 hover:text-red-600 w-full transition-colors",children:[e.jsx(k,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"Déconnexion"})]})})]})}),r&&e.jsx("div",{className:"lg:hidden fixed inset-0 bg-black bg-opacity-50 z-30",onClick:()=>l(!1)})]})}function I({children:o}){const n=x(),[r,l]=i.useState(!1),[h,s]=i.useState(!0);i.useEffect(()=>{d()},[]);const d=async()=>{try{const{data:{session:t}}=await c.auth.getSession();if(!t){n("/merchant/login");return}const{data:y}=await c.from("delivery_persons").select("id").eq("email",t.user.email).maybeSingle();if(y){await c.auth.signOut(),n("/merchant/login");return}const{data:u,error:m}=await c.from("merchants").select("id").eq("email",t.user.email).maybeSingle();if(m||!u){n("/merchant/login");return}l(!0)}catch(t){console.error("Auth check error:",t),n("/merchant/login")}finally{s(!1)}};return h?e.jsx("div",{className:"flex min-h-screen bg-slate-50 items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-sky-600"})}):r?e.jsxs("div",{className:"flex min-h-screen bg-slate-50",children:[e.jsx(q,{}),e.jsx("main",{className:"flex-1 lg:ml-64",children:e.jsx("div",{className:"p-6 lg:p-8",children:o})})]}):null}export{I as M,w as P,S as U,z as X,N as a,v as b,M as c};
